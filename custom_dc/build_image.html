<!DOCTYPE html>

<html lang="en">
<head>
  <title>Build and run a custom image - Docs - Data Commons</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" href="/assets/images/favicon.png" type="image/png"/>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@300;400;500;700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@600&family=Roboto&family=Material+Icons&display=swap" rel="stylesheet">
  <link href="/assets/css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/custom.css">
  
  
</head>
<body>
  <div id="main">
    <header id="main-header">
      <nav class="navbar navbar-light navbar-expand-lg col" id="main-nav">
        <div class="container-fluid">
          <div class="navbar-brand">
            <div id="main-header-logo">
                <a href="https://datacommons.org/">
                  <img src="/assets/images/dc-logo.svg" />
                </a>
            </div>
            <a href="https://datacommons.org">Data Commons</a>
            <span><a href="/">Docs</a></span>
            </a>
          </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
          data-target="#dc-main-nav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-md-end" id="dc-main-nav">
          <ul class="navbar-nav float-md-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="nav-explore-dropdown"
                role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Explore
              </a>
              <div class="dropdown-menu" aria-labelledby="nav-explore-dropdown">
                <a class="dropdown-item" href="https://datacommons.org/place">Place
                  Explorer</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/browser">Knowledge Graph</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/tools/visualization#visType=timeline">Timelines Explorer</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/tools/visualization#visType=scatter">Scatter Plot Explorer</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/tools/visualization#visType=map">Map Explorer</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/tools/statvar">Statistical Variable Explorer</a>
                <a class="dropdown-item"
                  href="https://datacommons.org/tools/download">Data Download Tool</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="nav-doc-dropdown"
                role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Documentation
              </a>
              <div class="dropdown-menu" aria-labelledby="nav-doc-dropdown">
                <a class="dropdown-item" href="/">Documentation</a>
                <a class="dropdown-item" href="/api">APIs</a>
                <a class="dropdown-item" href="/tutorials">Tutorials</a>
                <a class="dropdown-item" href="/contributing/">Contribute</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="nav-about-dropdown"
                role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                About
              </a>
              <div class="dropdown-menu" aria-labelledby="nav-about-dropdown">
                <a class="dropdown-item" href="https://datacommons.org/about">About Data
                  Commons</a>
                <a class="dropdown-item" href="https://blog.datacommons.org/">Blog</a>
                <a class="dropdown-item" href="https://datacommons.org/datasets">Data
                  Sources</a>
                <a class="dropdown-item" href="https://datacommons.org/faq">FAQ</a>
                <a class="dropdown-item" href="https://datacommons.org/feedback">Feedback</a>
              </div>
            </li>
            </ul>
            <div class="gcse-searchbox-only"
              data-resultsUrl="https://datacommons.org/search"></div>
            </div>
            </div>
      </nav>
    </header>

    <main id="" class="container-fluid">
      <div class="row">
        <div id="main-side-nav" class="col-3">
          <div id="sidebar"><details class="parent" open>
          <summary>
            <a href="/" class="">What is Data Commons?</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/how_to_use.html" class="">How to use Data Commons</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/data_model.html" class="">Key concepts</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/api/" class="">API</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-96"><details class="child" >
                  <summary>
                    <a href="/api/rest/v2" class="">REST (v2)</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-1"><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/getting_started" class="">
                              
                              Getting Started Guide
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/observation" class="">
                              
                              Observation
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/node.html" class="">
                              
                              Node
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/resolve.html" class="">
                              
                              Resolve entities
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/sparql.html" class="">
                              
                              SPARQL
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/python/" class="">Python</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-4"><details class="child" >
                          <summary>
                            <a href="/api/python/query.html" class="">
                              
                              SPARQL
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/triple.html" class="">
                              
                              Triple
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/property_label.html" class="">
                              
                              Property Label
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/property_value.html" class="">
                              
                              Property Value
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/place_in.html" class="">
                              
                              Places within a Place
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_value.html" class="">
                              
                              Place Statistics - Single Value
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_series.html" class="">
                              
                              Place Statistics - Time Series
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_all.html" class="">
                              
                              Place Statistics - All
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/pandas/" class="">Pandas</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-5"><details class="child" >
                          <summary>
                            <a href="/api/pandas/time_series.html" class="">
                              
                              Time Series as pd.Series
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/pandas/time_series_dataframe.html" class="">
                              
                              Time Series Table as pd.DataFrame
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/pandas/multivariate_dataframe.html" class="">
                              
                              Multivariate Table as pd.DataFrame
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/sheets/" class="">Google Sheets</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-6"><details class="child" >
                          <summary>
                            <a href="/api/sheets/get_name.html" class="">
                              
                              Names Associated with a DCID
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/sheets/places_in.html" class="">
                              
                              Places Contained Within Another Place
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/sheets/get_variable.html" class="">
                              
                              Statistical Variable Values
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/sheets/get_property.html" class="">
                              
                              Node Property Values
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/sheets/get_cohort_members.html" class="">
                              
                              Cohort Members
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/sheets/tutorials/" class="">
                              
                              Tutorials
                            </a>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                          </summary>
                          <ul id="grandchild-6"></ul></details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/web_components/" class="">Web Components</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-7"><details class="child" >
                          <summary>
                            <a href="/api/web_components/bar" class="">
                              
                              Bar Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/gauge" class="">
                              
                              Gauge Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/highlight" class="">
                              
                              Highlight Tile
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/line" class="">
                              
                              Line Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/map" class="">
                              
                              Map Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/pie" class="">
                              
                              Pie Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/ranking" class="">
                              
                              Ranking Chart
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/scatter" class="">
                              
                              Scatter Plot
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/web_components/slider" class="">
                              
                              Slider Control
                            </a>
                            
                          </summary>
                          </details></ul></details></ul></details><details class="parent" open>
          <summary>
            <a href="/bigquery/" class="">Query with SQL/BigQuery</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-97"><details class="child" >
                  <summary>
                    <a href="/bigquery/query_places.html" class="">Places</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_property_places.html" class="">Properties of places</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_more_complex.html" class="">More complex queries</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_join_your_data.html" class="">Join with external data</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/papers/" class="">Papers</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/tutorials/" class="">Case Studies</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/courseware/" class="">Courseware</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-100"><details class="child" >
                  <summary>
                    <a href="/courseware/data_literacy/" class="">Data Literacy with Data Commons</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-1"><details class="child" >
                          <summary>
                            <a href="/courseware/data_literacy/overview.html" class="">
                              
                              Overview
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/courseware/data_literacy/course_materials/" class="">
                              
                              Course Materials
                            </a>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                          </summary>
                          <ul id="grandchild-2"><li class="">
                                  <a href="/courseware/data_literacy/course_materials/modules.html" class="">
                                    Modules
                                  </a>
                                </li><li class="">
                                  <a href="/courseware/data_literacy/course_materials/key_themes.html" class="">
                                    Key Themes
                                  </a>
                                </li><li class="">
                                  <a href="/courseware/data_literacy/course_materials/how_to_use.html" class="">
                                    How to Use
                                  </a>
                                </li></ul></details><details class="child" >
                          <summary>
                            <a href="/courseware/data_literacy/faqs.html" class="">
                              
                              FAQs
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/courseware/intro_data_science.html" class="">Intro to Data Science</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/contributing/" class="">Contribute to Data Commons</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/custom_dc/" class="">Build your own Data Commons</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-102"><details class="child" >
                  <summary>
                    <a href="/custom_dc/quickstart.html" class="">Get started</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/custom_data.html" class="">Work with custom data</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/custom_ui.html" class="">Customize the site</a>
                    
                  </summary>
                  </details><details class="child" open>
                  <summary>
                    <a href="/custom_dc/build_image.html" class=" active">Build and run a custom image</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/data_cloud.html" class="">Test data in Google Cloud</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/deploy_cloud.html" class="">Deploy a custom instance to Google Cloud</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/launch_cloud.html" class="">Launch a custom site</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/faq.html" class="">Frequently asked questions</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/troubleshooting.html" class="">Troubleshooting</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/place_types.html" class="">Place Types</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/datasets/" class="">Data Sources</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-115"><details class="child" >
                  <summary>
                    <a href="/datasets/Agriculture.html" class="">Agriculture</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Biomedical.html" class="">Biomedical</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Crime.html" class="">Crime</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Demographics.html" class="">Demographics</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Economy.html" class="">Economy</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Education.html" class="">Education</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Energy.html" class="">Energy</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Environment.html" class="">Environment</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Health.html" class="">Health</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/datasets/Housing.html" class="">Housing</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/import_dataset/" class="">Data Imports</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-120"><details class="child" >
                  <summary>
                    <a href="/import_dataset/schema_less_guide.html" class="">Data Commons Schema-less Guide</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/glossary.html" class="">Glossary</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/blog.html" class="">Blog</a>
            
          </summary>
          </details></div>
        </div>
        <div class="col-9">
          <div id="main-doc-content">
            
              
                <nav aria-label="Breadcrumb" id="main-breadcrumb">
                  <ol class="breadcrumb">
                    
                      <li class="breadcrumb-item">
                        <a href="/custom_dc/">
                          Build your own Data Commons
                        </a>
                      </li>
                    
                    <li class="breadcrumb-item active"><span>Build and run a custom image </span></li>
                  </ol>
                </nav>
              
            
            <h1 class="no_toc" id="build-and-run-a-custom-image">Build and run a custom image</h1>

<ul id="markdown-toc">
  <li><a href="#use-a-prebuilt-image" id="markdown-toc-use-a-prebuilt-image">Use a prebuilt image</a></li>
  <li><a href="#build-repo" id="markdown-toc-build-repo">Build a local image</a>    <ul>
      <li><a href="#sync-a-local-workspace-to-the-stable-release" id="markdown-toc-sync-a-local-workspace-to-the-stable-release">Sync a local workspace to the stable release</a></li>
      <li><a href="#build-the-repo-locally" id="markdown-toc-build-the-repo-locally">Build the repo locally</a></li>
    </ul>
  </li>
  <li><a href="#run-the-container-with-the-local-sqlite-database" id="markdown-toc-run-the-container-with-the-local-sqlite-database">Run the container with the local SQLite database</a></li>
</ul>

<h2 id="use-a-prebuilt-image">Use a prebuilt image</h2>

<p>While you are just testing out data changes, you don’t need to build the website, but can just use a prebuilt Data Commons image.</p>

<p>Data Commons provides two prebuilt images in the Google Artifact Registry that you can download to run in a Docker container:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">gcr.io/datcom-ci/datacommons-website-compose:stable</code>. This is a tested, stable version but may be several weeks old.</li>
  <li><code class="language-plaintext highlighter-rouge">gcr.io/datcom-ci/datacommons-website-compose:latest</code>. This is the latest version built from head.</li>
</ul>

<p>If you want to pick up the latest prebuilt version, do the following:</p>

<ol>
  <li>
    <p>From the root directory (e.g. <code class="language-plaintext highlighter-rouge">website</code>), run the following command:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull gcr.io/datcom-ci/datacommons-website-compose:latest
</code></pre></div>    </div>
  </li>
  <li>
    <p>Rerun the container, specifying that repo as the argument to the <code class="language-plaintext highlighter-rouge">docker run</code> command:</p>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="se">\</span>
<span class="nt">-p</span> 8080:8080 <span class="se">\</span>
<span class="nt">-e</span> <span class="nv">DEBUG</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
<span class="nt">-env-file</span> <span class="nv">$PWD</span>/custom_dc/env.list <span class="se">\</span>
<span class="nt">-v</span> <span class="nv">$PWD</span>/custom_dc/sample:<span class="nv">$PWD</span>/custom_dc/sample <span class="se">\</span>
gcr.io/datcom-ci/datacommons-website-compose:latest
</code></pre></div></div>

<h2 id="build-repo">Build a local image</h2>

<p>You will need to build a local image in any of the following cases:</p>
<ul>
  <li>You are making substantive changes to the website UI</li>
  <li>You are ready to deploy your custom site to GCP</li>
</ul>

<p>Rather than building from “head”, that is, the very latest changes in Github, which may not have been tested, we recommend that you use the tested “release” equivalent of the stable Docker image. This release uses the tag <code class="language-plaintext highlighter-rouge">customdc_stable</code>, and is available at <a href="https://github.com/datacommonsorg/website/releases/tag/customdc_stable">https://github.com/datacommonsorg/website/releases/tag/customdc_stable</a>.</p>

<p>Note: If you are working on a large-scale customization, we recommend that you use a version control system to manage your code. We provide procedures for Github, and assume the following:</p>
<ul>
  <li>You have a Github account and project.</li>
  <li>You have created a fork off the base Data Commons <code class="language-plaintext highlighter-rouge">website</code> repo (https://github.com/datacommonsorg/website) and a remote that points to it, and that you will push to that fork.</li>
</ul>

<h3 id="sync-a-local-workspace-to-the-stable-release">Sync a local workspace to the stable release</h3>

<p>If you are using a version control system other than Github, you can download a ZIP or TAR file from <a href="https://github.com/datacommonsorg/website/releases/tag/customdc_stable">https://github.com/datacommonsorg/website/releases/tag/customdc_stable</a>.</p>

<p>In Github, use the following procedure.</p>

<ol>
  <li>
    <p>If you want to reuse the root directory you previously created and cloned, skip to step 3. 
If you want to create a new source directory and start from scratch, clone the repo up to the stable release tag:</p>

    <pre>
   git clone https://github.com/datacommonsorg/website --branch customdc_stable --single-branch  [<var>DIRECTORY</var>]
   </pre>
  </li>
  <li>
    <p>Change to the root directory:</p>

    <pre>
cd website | cd <var>DIRECTORY</var>
</pre>
  </li>
  <li>
    <p>Create a new branch synced to the stable release:</p>

    <pre>
git checkout -b <var>BRANCH_NAME</var> customdc_stable
</pre>
  </li>
  <li>
    <p>To verify that your local repo is at the same version of the code, run the following command:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git log --oneline --graph
</code></pre></div>    </div>
    <p>You should see output similar to the following:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* 52635c8 (grafted, HEAD -&gt; branch1, tag: customdc_stable) ...
...
</code></pre></div>    </div>

    <p>Verify that the last commit in the output matches that listed in <a href="https://github.com/datacommonsorg/website/releases/tag/customdc_stable">https://github.com/datacommonsorg/website/releases/tag/customdc_stable</a>.</p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">q</code> to exit the output log.</p>
  </li>
  <li>
    <p>Create and update the necessary submodules:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule foreach git pull origin customdc_stable
git submodule update --init --recursive
</code></pre></div>    </div>
    <p>You should see output like the following:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Submodule 'import' (https://github.com/datacommonsorg/import.git) registered for path 'import'
Submodule 'mixer' (https://github.com/datacommonsorg/mixer.git) registered for path 'mixer'
Submodule path 'import': checked out '7d197583b6ad0dfe0568532f919482527c004a8e'
Submodule path 'mixer': checked out '478cd499d4841a14efaf96ccf71bd36b74604486'
</code></pre></div>    </div>
  </li>
  <li>
    <p>Update all other files:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull origin customdc_stable
</code></pre></div>    </div>
    <p>You will likely see the following output:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From https://github.com/datacommonsorg/website 
* tag               customdc_stable -&gt; FETCH_HEAD
Already up to date.
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="build-the-repo-locally">Build the repo locally</h3>

<p>Run the following command to build the repo:</p>

<pre>
docker build --tag datacommons-website-compose:<var>DOCKER_TAG</var> \
-f build/web_compose/Dockerfile \
-t website-compose .
</pre>

<p>The <em>DOCKER_TAG</em> is a meaningful description of the version you are building.</p>

<p>It will take several minutes to build.</p>

<p>To run the container with the local SQLite database, start the Docker container as described below.</p>

<p>To run the container with a remote Cloud SQL database, see <a href="/custom_dc/data_cloud.html#docker-data">Start the Docker container with Cloud data</a> for procedures.</p>

<p>To upload and deploy the container to the Cloud, see <a href="/custom_dc/deploy_cloud.html">Deploy a custom instance to Google Cloud</a> for procedures.</p>

<h2 id="run-the-container-with-the-local-sqlite-database">Run the container with the local SQLite database</h2>

<p>Start the services using the locally built repo. If you have made changes to any of the UI components (or directories), be sure to map the <code class="language-plaintext highlighter-rouge">custom</code> directories (or alternative directories) to the Docker <code class="language-plaintext highlighter-rouge">workspace</code> directory.</p>

<pre>  
docker run -it \
--env-file $PWD/custom_dc/env.list \
-p 8080:8080 \
-e DEBUG=true \
-v <var>OUTPUT_DIRECTORY</var>:<var>OUTPUT_DIRECTORY</var> \
[-v $PWD/server/templates/custom_dc/custom:/workspace/server/templates/custom_dc/custom \]
[-v $PWD/static/custom_dc/custom:/workspace/static/custom_dc/custom \]
datacommons-website-compose:<var>DOCKER_TAG</var>
</pre>

          </div>
        </div>
      </div>
    </main>

    <footer id="main-footer">
      <div id="sub-footer">
        <span class="brand-byline">
          <span class="brand-text">An initiative from</span>
          <img class="brand-logo" src="/assets/images/google-logo.svg" />
        </span>
        <div class="sub-footer-links">
          <a href="https://policies.google.com/terms">Terms and Conditions</a>
          <a href="https://policies.google.com/privacy?hl=en-US">Privacy Policy</a>
          <a href="https://datacommons.org/disclaimers">Disclaimers</a>
        </div>
      </div>
    </footer>
  </div>
  <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script async
    src="https://cse.google.com/cse.js?cx=010079880385165835740%3Aosnv3q-sw08"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KWSES5WXZE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-KWSES5WXZE', {
      client_storage: 'none',
      anonymize_ip: true,
    });
  </script>
  <script src="/assets/js/tabs.js"></script>
</body>
</html>
